<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <title>Document</title>
</head>

<style>

div::-webkit-scrollbar {
  display: none;
  /* for Chrome, Safari, and Opera */
}

.btnBox{
    margin-top: 10px;
}


.titleBox{
    margin-top: 10px;
    width: 100%;
}

.row{
    margin-top: 20px;
}

.check-out-cart{
    max-height: 60%;
    overflow-y: scroll;
    overflow-x: hidden;

}

.check-out-cart .card{
margin: 2px;
max-height: 60px;
}

.check-out-cart .card-body {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
}

.check-out-cart .name{
    grid-column: 1 / span 2;
}

.check-out-cart .price{
    grid-column: 3;
    justify-self: end;
}

.formBox{
   height: 60vh;
   display: flex;
   justify-content: center;
   align-content: space-between;
}

.proceedBtn{
    margin-top: 10px;
    
}

.row {
    height: 80vh;
}



.cartBox{
    height:500px;
}



.row{
    max-height: 700px;
}

.leftSummary{
    background: #f7a93350;
    border-radius: 20px;
    padding-right: 10px;
}

.rightSummary{
    background: lightgrey;
    border-radius: 20px;
    padding-right: 10px;
}

.container{
    margin-top: 30px;
    background: rgba(211, 211, 211, 0.288);
}

form .row{
    max-height: 70px;
}



</style>


<body>
  
    
    <div class="container">
            
        <a class="nav-link text-center text-light bg-dark" href="/order">Edit Your Order (Return to Menu)</a>

        <div class="titleBox text-center">
            <h2>Order Details</h2>
        </div>

        <div class="row">
            <div class="col-sm-6 leftSummary">
                <h3 class="text-center">Order Summary</h3>
                <div class="check-out-cart cartBox" id="check-out-cart">

                    {% for item in cartItems%}
                    <div class="card">
                        <div class="card-body">
                            <p class="name">{{item.name}}</p>
                            <p class="price">${{item.price}}</p>
                        </div>
                    </div>
                    {% endfor %}
                </div>

                <h3 class="text-center">Order Total ${{cartTotal}}</h3>

                <div>
                    
                </div>

            </div>
            <div class="col-sm-6" id="detailsBox">   
                
                <div class="col-sm3">

                    
                <h5 >Customer Details</h5>    
                <form id="orderDetails "action="/newOrder" class="needs-validation" method="POST" novalidate>

                    <div class="row">
                        <div class="col">
                            <div class="form-group needs-validation" >
                                <label for="exampleInputEmail1">First Name</label>
                                <input type="text" class="form-control" name="fName" id="firstNameBox" placeholder="Enter name" required>
                                <small id="emailHelp" class="form-text text-muted"></small>
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group needs-validation">
                                <label for="exampleInputEmail1">Last Name</label>
                                <input type="text" class="form-control" name="lName" id="lastNameBox" placeholder="Enter name" required>
                                <small id="emailHelp" class="form-text text-muted"></small>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col">
                            <div class="form-group needs-validation">
                                <label for="exampleInputEmail1">Phone Number</label>
                                <input type="text" class="form-control" name="phone" id="nameBox" aria-describedby="emailHelp" placeholder="Enter number" required>
                                <small id="emailHelp" class="form-text text-muted"></small>
                            </div>
                        </div>

                        <div class="col">
                            <div class="form-group needs-validation">
                                <label for="exampleInputEmail1">Email address</label>
                                <input type="email" class="form-control"name="email" id="emailBox" aria-describedby="emailHelp" placeholder="Enter email" required>
                                <small id="emailHelp" class="form-text text-muted"></small>
                              </div>
                        </div>
                    </div>


                    <div class="row ">
                        <div class="col-6">
                            <label class="mr-sm-2" for="inlineFormCustomSelect">Pick up Time</label>
                            <select class="custom-select mr-sm-2" id="inlineFormCustomSelect" name="pickup">
                                <option selected>ASAP</option required>
                                <option value="8.30pm">8.30pm</option>
                                <option value="9.00pm">9.00pm</option>
                                <option value="9.30pm">9.30pm</option>
                              </select>
                        </div>
                    </div>

                    <br>
                    <h5 >Payment Details</h5>    

                    <div class="row ">
                        <div class="col-6">
                            <div class="form-group">
                                <label for="card_name">Name of Card Holder</label>
                                <input type="text" class="form-control" name="lName" id="lastNameBox" placeholder="Enter name" required>
                                <small id="cardName" class="form-text text-muted"></small>
                            </div>
                        </div>

                        <div class="col-3">
                            <div class="form-group" id="expiration-date">
                                <label>Exp</label>
                                <select class="custom-select mr-sm-2">
                                    <option value="01">Jan</option>
                                    <option value="02">Feb </option>
                                    <option value="03">March</option>
                                    <option value="04">April</option>
                                    <option value="05">May</option>
                                    <option value="06">June</option>
                                    <option value="07">July</option>
                                    <option value="08">August</option>
                                    <option value="09">September</option>
                                    <option value="10">October</option>
                                    <option value="11">November</option>
                                    <option value="12">December</option>
                                </select>

                        

                            </div>
                        </div>

                        <div class="col-3">

                            <div class="form-group" id="expiration-date">
                                <label>Exp</label>
                                    <select class="custom-select mr-sm-2">
                                        <option value="16"> 2024</option>
                                        <option value="17"> 2025</option>
                                        <option value="18"> 2026</option>
                                        <option value="19"> 2027</option>
                                        <option value="20"> 2028</option>
                                        <option value="21"> 2029</option>
                                    </select>
                                </select>

                        

                            </div>


                        </div>

                    </div>

                    <div class="row ">
                        <div class="col">
                            <label for="16-Digit Card Number">16-Digit Card Number</label>
                            <input type="text" pattern="[0-9]{16}" minlength="16" class="form-control" name="fName" id="firstNameBox" placeholder="xxxx xxxx xxxx xxxx" required>
                            <small id="cardNumber" class="form-text text-muted"></small>
                        </div>

                        <div class="col">
                            <label for="exampleInputEmail1">CVC</label>
                            <input type="text" pattern="[0-9]{3}"  minlength="3" class="form-control" i aria-describedby="emailHelp" placeholder="Enter CVC" required>
                            <small id="cvc" class="form-text text-muted">The three numbers on the back of your card</small>
                        </div>
                    </div>


                    <div class="row ">
                        <div class="col">
                            <div class="form-group">
                                <button class="btn btn-primary proceedBtn" onclick="proceedToPayment()">Complete Order</button> 
                            </div>
                        </div>
                    </div>
                    </div>


                </form>
            </div>

               







            
        </div>
    </div>
    
</body>

<!-- Optional JavaScript -->
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"></script>

<script>


$("#idForm").submit(function(e) {

e.preventDefault(); // avoid to execute the actual submit of the form.

var form = $(this);
var actionUrl = form.attr('action');


$.ajax({
    type: "POST",
    url: actionUrl,
    data: form.serialize(), // serializes the form's elements.
    success: function(data)
    {
      alert(data); 
    }
});

});








function completeOrder(){
    $("#orderDetails").submit()
}


// $("#orderDetails").addEventListener('submit', function() {
//     alert("yo")
// });
    




(function() {
  'use strict';
  window.addEventListener('load', function() {
    // Get the forms we want to add validation styles to
    var forms = document.getElementsByClassName('needs-validation');
    // Loop over them and prevent submission
    var validation = Array.prototype.filter.call(forms, function(form) {
      form.addEventListener('submit', function(event) {
        if (form.checkValidity() === false) {
          event.preventDefault();
          event.stopPropagation();
        }
        form.classList.add('was-validated');
      }, false);
    });
  }, false);
})();


</script>


</html>